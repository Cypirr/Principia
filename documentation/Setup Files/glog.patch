From f2687549830448f5eeee951b91afd69e83048a17 Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Fri, 17 Oct 2014 03:12:05 +0200
Subject: [PATCH 1/3] migrate

---
 google-glog.sln                                    |  20 ++--
 vsprojects/libglog/libglog.vcxproj                 | 114 +++++++++++++++++++++
 vsprojects/libglog/libglog.vcxproj.filters         |  65 ++++++++++++
 vsprojects/libglog_static/libglog_static.vcxproj   |  97 ++++++++++++++++++
 .../libglog_static/libglog_static.vcxproj.filters  |  63 ++++++++++++
 .../logging_unittest/logging_unittest.vcxproj      | 106 +++++++++++++++++++
 .../logging_unittest.vcxproj.filters               |  23 +++++
 .../logging_unittest_static.vcxproj                |  99 ++++++++++++++++++
 .../logging_unittest_static.vcxproj.filters        |  21 ++++
 9 files changed, 596 insertions(+), 12 deletions(-)
 create mode 100644 vsprojects/libglog/libglog.vcxproj
 create mode 100644 vsprojects/libglog/libglog.vcxproj.filters
 create mode 100644 vsprojects/libglog_static/libglog_static.vcxproj
 create mode 100644 vsprojects/libglog_static/libglog_static.vcxproj.filters
 create mode 100644 vsprojects/logging_unittest/logging_unittest.vcxproj
 create mode 100644 vsprojects/logging_unittest/logging_unittest.vcxproj.filters
 create mode 100644 vsprojects/logging_unittest_static/logging_unittest_static.vcxproj
 create mode 100644 vsprojects/logging_unittest_static/logging_unittest_static.vcxproj.filters

diff --git a/google-glog.sln b/google-glog.sln
index 298156f..c4b1585 100644
--- a/google-glog.sln
+++ b/google-glog.sln
@@ -1,19 +1,15 @@
 ﻿
-Microsoft Visual Studio Solution File, Format Version 10.00
-# Visual C++ Express 2008
-Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "libglog", "vsprojects\libglog\libglog.vcproj", "{34BD04BD-BC1D-4BFC-AAFC-ED02D9E960F1}"
+Microsoft Visual Studio Solution File, Format Version 12.00
+# Visual Studio 2013
+VisualStudioVersion = 12.0.30501.0
+MinimumVisualStudioVersion = 10.0.40219.1
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "libglog", "vsprojects\libglog\libglog.vcxproj", "{34BD04BD-BC1D-4BFC-AAFC-ED02D9E960F1}"
 EndProject
-Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "logging_unittest", "vsprojects\logging_unittest\logging_unittest.vcproj", "{DD0690AA-5E09-46B5-83FD-4B28604CABA8}"
-	ProjectSection(ProjectDependencies) = postProject
-		{34BD04BD-BC1D-4BFC-AAFC-ED02D9E960F1} = {34BD04BD-BC1D-4BFC-AAFC-ED02D9E960F1}
-	EndProjectSection
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "logging_unittest", "vsprojects\logging_unittest\logging_unittest.vcxproj", "{DD0690AA-5E09-46B5-83FD-4B28604CABA8}"
 EndProject
-Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "libglog_static", "vsprojects\libglog_static\libglog_static.vcproj", "{772C2111-BBBF-49E6-B912-198A7F7A88E5}"
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "libglog_static", "vsprojects\libglog_static\libglog_static.vcxproj", "{772C2111-BBBF-49E6-B912-198A7F7A88E5}"
 EndProject
-Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "logging_unittest_static", "vsprojects\logging_unittest_static\logging_unittest_static.vcproj", "{9B239B45-84A9-4E06-AC46-8E220CD43974}"
-	ProjectSection(ProjectDependencies) = postProject
-		{772C2111-BBBF-49E6-B912-198A7F7A88E5} = {772C2111-BBBF-49E6-B912-198A7F7A88E5}
-	EndProjectSection
+Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "logging_unittest_static", "vsprojects\logging_unittest_static\logging_unittest_static.vcxproj", "{9B239B45-84A9-4E06-AC46-8E220CD43974}"
 EndProject
 Global
 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
diff --git a/vsprojects/libglog/libglog.vcxproj b/vsprojects/libglog/libglog.vcxproj
new file mode 100644
index 0000000..4b48c6f
--- /dev/null
+++ b/vsprojects/libglog/libglog.vcxproj
@@ -0,0 +1,114 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup Label="ProjectConfigurations">
+    <ProjectConfiguration Include="Debug|Win32">
+      <Configuration>Debug</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+    <ProjectConfiguration Include="Release|Win32">
+      <Configuration>Release</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+  </ItemGroup>
+  <PropertyGroup Label="Globals">
+    <ProjectGuid>{34BD04BD-BC1D-4BFC-AAFC-ED02D9E960F1}</ProjectGuid>
+    <RootNamespace>libglog</RootNamespace>
+    <Keyword>Win32Proj</Keyword>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
+    <ConfigurationType>DynamicLibrary</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>Unicode</CharacterSet>
+    <WholeProgramOptimization>true</WholeProgramOptimization>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
+    <ConfigurationType>DynamicLibrary</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>Unicode</CharacterSet>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
+  <ImportGroup Label="ExtensionSettings">
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <PropertyGroup Label="UserMacros" />
+  <PropertyGroup>
+    <_ProjectFileVersion>12.0.30501.0</_ProjectFileVersion>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+    <LinkIncremental>true</LinkIncremental>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+    <LinkIncremental>false</LinkIncremental>
+  </PropertyGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <ClCompile>
+      <Optimization>Disabled</Optimization>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>WIN32;_DEBUG;_WINDOWS;_USRDLL;LIBGLOG_EXPORTS;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <MinimalRebuild>true</MinimalRebuild>
+      <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
+      <RuntimeLibrary>MultiThreadedDebugDLL</RuntimeLibrary>
+      <PrecompiledHeader />
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>EditAndContinue</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <SubSystem>Windows</SubSystem>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <ClCompile>
+      <Optimization>MaxSpeed</Optimization>
+      <IntrinsicFunctions>true</IntrinsicFunctions>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>WIN32;NDEBUG;_WINDOWS;_USRDLL;LIBGLOG_EXPORTS;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <RuntimeLibrary>MultiThreadedDLL</RuntimeLibrary>
+      <FunctionLevelLinking>true</FunctionLevelLinking>
+      <PrecompiledHeader />
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <SubSystem>Windows</SubSystem>
+      <OptimizeReferences>true</OptimizeReferences>
+      <EnableCOMDATFolding>true</EnableCOMDATFolding>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging.cc" />
+    <ClCompile Include="..\..\src\raw_logging.cc" />
+    <ClCompile Include="..\..\src\utilities.cc" />
+    <ClCompile Include="..\..\src\vlog_is_on.cc" />
+    <ClCompile Include="..\..\src\windows\port.cc" />
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\base\commandlineflags.h" />
+    <ClInclude Include="..\..\src\base\googleinit.h" />
+    <ClInclude Include="..\..\src\base\mutex.h" />
+    <ClInclude Include="..\..\src\utilities.h" />
+    <ClInclude Include="..\..\src\windows\config.h" />
+    <ClInclude Include="..\..\src\windows\glog\logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\log_severity.h" />
+    <ClInclude Include="..\..\src\windows\glog\raw_logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\stl_logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h" />
+    <ClInclude Include="..\..\src\windows\port.h" />
+  </ItemGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
+  <ImportGroup Label="ExtensionTargets">
+  </ImportGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/libglog/libglog.vcxproj.filters b/vsprojects/libglog/libglog.vcxproj.filters
new file mode 100644
index 0000000..5efac96
--- /dev/null
+++ b/vsprojects/libglog/libglog.vcxproj.filters
@@ -0,0 +1,65 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup>
+    <Filter Include="Source Files">
+      <UniqueIdentifier>{4FC737F1-C7A5-4376-A066-2A32D752A2FF}</UniqueIdentifier>
+      <Extensions>cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx</Extensions>
+    </Filter>
+    <Filter Include="Header Files">
+      <UniqueIdentifier>{93995380-89BD-4b04-88EB-625FBE52EBFB}</UniqueIdentifier>
+      <Extensions>h;hpp;hxx;hm;inl;inc;xsd</Extensions>
+    </Filter>
+  </ItemGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\windows\port.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\raw_logging.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\utilities.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\vlog_is_on.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\base\commandlineflags.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\config.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\base\googleinit.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\log_severity.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\base\mutex.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\port.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\raw_logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\stl_logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\utilities.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+  </ItemGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/libglog_static/libglog_static.vcxproj b/vsprojects/libglog_static/libglog_static.vcxproj
new file mode 100644
index 0000000..c63cd94
--- /dev/null
+++ b/vsprojects/libglog_static/libglog_static.vcxproj
@@ -0,0 +1,97 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup Label="ProjectConfigurations">
+    <ProjectConfiguration Include="Debug|Win32">
+      <Configuration>Debug</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+    <ProjectConfiguration Include="Release|Win32">
+      <Configuration>Release</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+  </ItemGroup>
+  <PropertyGroup Label="Globals">
+    <ProjectGuid>{772C2111-BBBF-49E6-B912-198A7F7A88E5}</ProjectGuid>
+    <RootNamespace>libglog_static</RootNamespace>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
+    <ConfigurationType>StaticLibrary</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>MultiByte</CharacterSet>
+    <WholeProgramOptimization>true</WholeProgramOptimization>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
+    <ConfigurationType>StaticLibrary</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>MultiByte</CharacterSet>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
+  <ImportGroup Label="ExtensionSettings">
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <PropertyGroup Label="UserMacros" />
+  <PropertyGroup>
+    <_ProjectFileVersion>12.0.30501.0</_ProjectFileVersion>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+  </PropertyGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <ClCompile>
+      <Optimization>Disabled</Optimization>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>GOOGLE_GLOG_DLL_DECL=;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <MinimalRebuild>true</MinimalRebuild>
+      <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
+      <RuntimeLibrary>MultiThreadedDebugDLL</RuntimeLibrary>
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>EditAndContinue</DebugInformationFormat>
+    </ClCompile>
+  </ItemDefinitionGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <ClCompile>
+      <Optimization>MaxSpeed</Optimization>
+      <IntrinsicFunctions>true</IntrinsicFunctions>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>GOOGLE_GLOG_DLL_DECL=;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <RuntimeLibrary>MultiThreadedDLL</RuntimeLibrary>
+      <FunctionLevelLinking>true</FunctionLevelLinking>
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
+    </ClCompile>
+  </ItemDefinitionGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging.cc" />
+    <ClCompile Include="..\..\src\raw_logging.cc" />
+    <ClCompile Include="..\..\src\utilities.cc" />
+    <ClCompile Include="..\..\src\vlog_is_on.cc" />
+    <ClCompile Include="..\..\src\windows\port.cc" />
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\base\commandlineflags.h" />
+    <ClInclude Include="..\..\src\base\googleinit.h" />
+    <ClInclude Include="..\..\src\base\mutex.h" />
+    <ClInclude Include="..\..\src\utilities.h" />
+    <ClInclude Include="..\..\src\windows\config.h" />
+    <ClInclude Include="..\..\src\windows\glog\logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\log_severity.h" />
+    <ClInclude Include="..\..\src\windows\glog\raw_logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\stl_logging.h" />
+    <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h" />
+    <ClInclude Include="..\..\src\windows\port.h" />
+  </ItemGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
+  <ImportGroup Label="ExtensionTargets">
+  </ImportGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/libglog_static/libglog_static.vcxproj.filters b/vsprojects/libglog_static/libglog_static.vcxproj.filters
new file mode 100644
index 0000000..d73424b
--- /dev/null
+++ b/vsprojects/libglog_static/libglog_static.vcxproj.filters
@@ -0,0 +1,63 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup>
+    <Filter Include="Source Files">
+      <UniqueIdentifier>{927ad238-1abf-4618-a9e8-08c172442bb2}</UniqueIdentifier>
+    </Filter>
+    <Filter Include="Header Files">
+      <UniqueIdentifier>{08189f04-ee79-41cb-8cf2-9c89e815b183}</UniqueIdentifier>
+    </Filter>
+  </ItemGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\windows\port.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\raw_logging.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\utilities.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\vlog_is_on.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\base\commandlineflags.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\config.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\base\googleinit.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\log_severity.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\base\mutex.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\port.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\raw_logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\stl_logging.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\utilities.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+  </ItemGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/logging_unittest/logging_unittest.vcxproj b/vsprojects/logging_unittest/logging_unittest.vcxproj
new file mode 100644
index 0000000..48c47b1
--- /dev/null
+++ b/vsprojects/logging_unittest/logging_unittest.vcxproj
@@ -0,0 +1,106 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup Label="ProjectConfigurations">
+    <ProjectConfiguration Include="Debug|Win32">
+      <Configuration>Debug</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+    <ProjectConfiguration Include="Release|Win32">
+      <Configuration>Release</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+  </ItemGroup>
+  <PropertyGroup Label="Globals">
+    <ProjectGuid>{DD0690AA-5E09-46B5-83FD-4B28604CABA8}</ProjectGuid>
+    <RootNamespace>logging_unittest</RootNamespace>
+    <Keyword>Win32Proj</Keyword>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
+    <ConfigurationType>Application</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>Unicode</CharacterSet>
+    <WholeProgramOptimization>true</WholeProgramOptimization>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
+    <ConfigurationType>Application</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>Unicode</CharacterSet>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
+  <ImportGroup Label="ExtensionSettings">
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <PropertyGroup Label="UserMacros" />
+  <PropertyGroup>
+    <_ProjectFileVersion>12.0.30501.0</_ProjectFileVersion>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+    <LinkIncremental>true</LinkIncremental>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+    <LinkIncremental>false</LinkIncremental>
+  </PropertyGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <ClCompile>
+      <Optimization>Disabled</Optimization>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>WIN32;_DEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <MinimalRebuild>true</MinimalRebuild>
+      <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
+      <RuntimeLibrary>MultiThreadedDebugDLL</RuntimeLibrary>
+      <PrecompiledHeader />
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>EditAndContinue</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <SubSystem>Console</SubSystem>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <ClCompile>
+      <Optimization>MaxSpeed</Optimization>
+      <IntrinsicFunctions>true</IntrinsicFunctions>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>WIN32;NDEBUG;_CONSOLE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <RuntimeLibrary>MultiThreadedDLL</RuntimeLibrary>
+      <FunctionLevelLinking>true</FunctionLevelLinking>
+      <PrecompiledHeader />
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <SubSystem>Console</SubSystem>
+      <OptimizeReferences>true</OptimizeReferences>
+      <EnableCOMDATFolding>true</EnableCOMDATFolding>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging_unittest.cc" />
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\googletest.h" />
+  </ItemGroup>
+  <ItemGroup>
+    <ProjectReference Include="..\libglog\libglog.vcxproj">
+      <Project>{34bd04bd-bc1d-4bfc-aafc-ed02d9e960f1}</Project>
+      <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
+    </ProjectReference>
+  </ItemGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
+  <ImportGroup Label="ExtensionTargets">
+  </ImportGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/logging_unittest/logging_unittest.vcxproj.filters b/vsprojects/logging_unittest/logging_unittest.vcxproj.filters
new file mode 100644
index 0000000..3455a1f
--- /dev/null
+++ b/vsprojects/logging_unittest/logging_unittest.vcxproj.filters
@@ -0,0 +1,23 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup>
+    <Filter Include="Source Files">
+      <UniqueIdentifier>{4FC737F1-C7A5-4376-A066-2A32D752A2FF}</UniqueIdentifier>
+      <Extensions>cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx</Extensions>
+    </Filter>
+    <Filter Include="Header Files">
+      <UniqueIdentifier>{93995380-89BD-4b04-88EB-625FBE52EBFB}</UniqueIdentifier>
+      <Extensions>h;hpp;hxx;hm;inl;inc;xsd</Extensions>
+    </Filter>
+  </ItemGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging_unittest.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\googletest.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+  </ItemGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj b/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj
new file mode 100644
index 0000000..c5acc45
--- /dev/null
+++ b/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj
@@ -0,0 +1,99 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project DefaultTargets="Build" ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup Label="ProjectConfigurations">
+    <ProjectConfiguration Include="Debug|Win32">
+      <Configuration>Debug</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+    <ProjectConfiguration Include="Release|Win32">
+      <Configuration>Release</Configuration>
+      <Platform>Win32</Platform>
+    </ProjectConfiguration>
+  </ItemGroup>
+  <PropertyGroup Label="Globals">
+    <ProjectGuid>{9B239B45-84A9-4E06-AC46-8E220CD43974}</ProjectGuid>
+    <RootNamespace>logging_unittest_static</RootNamespace>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
+    <ConfigurationType>Application</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>MultiByte</CharacterSet>
+    <WholeProgramOptimization>true</WholeProgramOptimization>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
+    <ConfigurationType>Application</ConfigurationType>
+    <PlatformToolset>v120</PlatformToolset>
+    <CharacterSet>MultiByte</CharacterSet>
+  </PropertyGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
+  <ImportGroup Label="ExtensionSettings">
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
+    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+  </ImportGroup>
+  <PropertyGroup Label="UserMacros" />
+  <PropertyGroup>
+    <_ProjectFileVersion>12.0.30501.0</_ProjectFileVersion>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+  </PropertyGroup>
+  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <OutDir>$(SolutionDir)$(Configuration)\</OutDir>
+    <IntDir>$(Configuration)\</IntDir>
+  </PropertyGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
+    <ClCompile>
+      <Optimization>Disabled</Optimization>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>GOOGLE_GLOG_DLL_DECL=;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <MinimalRebuild>true</MinimalRebuild>
+      <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
+      <RuntimeLibrary>MultiThreadedDebugDLL</RuntimeLibrary>
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>EditAndContinue</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
+    <ClCompile>
+      <Optimization>MaxSpeed</Optimization>
+      <IntrinsicFunctions>true</IntrinsicFunctions>
+      <AdditionalIncludeDirectories>..\..\src\windows;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>GOOGLE_GLOG_DLL_DECL=;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <RuntimeLibrary>MultiThreadedDLL</RuntimeLibrary>
+      <FunctionLevelLinking>true</FunctionLevelLinking>
+      <WarningLevel>Level3</WarningLevel>
+      <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
+    </ClCompile>
+    <Link>
+      <GenerateDebugInformation>true</GenerateDebugInformation>
+      <OptimizeReferences>true</OptimizeReferences>
+      <EnableCOMDATFolding>true</EnableCOMDATFolding>
+      <TargetMachine>MachineX86</TargetMachine>
+    </Link>
+  </ItemDefinitionGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\googletest.h" />
+  </ItemGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging_unittest.cc" />
+  </ItemGroup>
+  <ItemGroup>
+    <ProjectReference Include="..\libglog_static\libglog_static.vcxproj">
+      <Project>{772c2111-bbbf-49e6-b912-198a7f7a88e5}</Project>
+      <ReferenceOutputAssembly>false</ReferenceOutputAssembly>
+    </ProjectReference>
+  </ItemGroup>
+  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
+  <ImportGroup Label="ExtensionTargets">
+  </ImportGroup>
+</Project>
\ No newline at end of file
diff --git a/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj.filters b/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj.filters
new file mode 100644
index 0000000..ebb4ac6
--- /dev/null
+++ b/vsprojects/logging_unittest_static/logging_unittest_static.vcxproj.filters
@@ -0,0 +1,21 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ItemGroup>
+    <Filter Include="Header Files">
+      <UniqueIdentifier>{52db389a-91ab-4870-97b3-22b1876fa519}</UniqueIdentifier>
+    </Filter>
+    <Filter Include="Source Files">
+      <UniqueIdentifier>{86be7af1-7a5f-4319-b36c-6a4df6ca886d}</UniqueIdentifier>
+    </Filter>
+  </ItemGroup>
+  <ItemGroup>
+    <ClInclude Include="..\..\src\googletest.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+  </ItemGroup>
+  <ItemGroup>
+    <ClCompile Include="..\..\src\logging_unittest.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+  </ItemGroup>
+</Project>
\ No newline at end of file
-- 
1.8.4.msysgit.0

From d15e593d9b10b99e17cbac559badb5f2370c094d Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Fri, 17 Oct 2014 03:30:32 +0200
Subject: [PATCH 2/3] Make it build.

---
 src/logging.cc | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/logging.cc b/src/logging.cc
index ec334a9..43611fd 100644
--- a/src/logging.cc
+++ b/src/logging.cc
@@ -32,6 +32,7 @@
 #include "utilities.h"
 
 #include <assert.h>
+#include <algorithm>
 #include <iomanip>
 #include <string>
 #ifdef HAVE_UNISTD_H
-- 
1.8.4.msysgit.0

From 94296b003070d403050d7122daae3d3eac1fac93 Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Fri, 17 Oct 2014 03:32:24 +0200
Subject: [PATCH 3/3] Don't warn.

---
 src/windows/glog/logging.h | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/src/windows/glog/logging.h b/src/windows/glog/logging.h
index 1d91b12..ea68db8 100644
--- a/src/windows/glog/logging.h
+++ b/src/windows/glog/logging.h
@@ -1155,7 +1155,19 @@ public:
     char* str() const { return pbase(); }
 
   private:
+    // LogStream inherit from non-DLL-exported class (std::ostrstream)
+    // and VC++ produces a warning for this situation.
+    // However, MSDN says "C4251 can be ignored if you are deriving from a type
+    // in the Standard C++ Library"
+    // http://msdn.microsoft.com/en-us/library/esew7y1w.aspx
+    // Let's just ignore the warning.
+#ifdef _MSC_VER
+# pragma warning(disable: 4251)
+#endif
     base_logging::LogStreamBuf streambuf_;
+#ifdef _MSC_VER
+# pragma warning(default: 4251)
+#endif
     int ctr_;  // Counter hack (for the LOG_EVERY_X() macro)
     LogStream *self_;  // Consistency check hack
   };
-- 
1.8.4.msysgit.0

From 4e0392584ac0714b7234ec8a9ff6ef71369d0bd2 Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Sat, 18 Oct 2014 13:45:19 +0200
Subject: [PATCH] remove /EDITANDCONTINUE

---
 vsprojects/libglog_static/libglog_static.vcxproj | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/vsprojects/libglog_static/libglog_static.vcxproj b/vsprojects/libglog_static/libglog_static.vcxproj
index c63cd94..bb2eb6e 100644
--- a/vsprojects/libglog_static/libglog_static.vcxproj
+++ b/vsprojects/libglog_static/libglog_static.vcxproj
@@ -56,7 +56,7 @@
       <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
       <RuntimeLibrary>MultiThreadedDebugDLL</RuntimeLibrary>
       <WarningLevel>Level3</WarningLevel>
-      <DebugInformationFormat>EditAndContinue</DebugInformationFormat>
+      <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
     </ClCompile>
   </ItemDefinitionGroup>
   <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
-- 
1.8.4.msysgit.0

From 2b0434f92c31a7fbef48df26069d112c1eb69931 Mon Sep 17 00:00:00 2001
From: pleroy <phl+personal@google.com>
Date: Sun, 19 Oct 2014 00:33:18 +0200
Subject: [PATCH] Stack trace support for Windows

---
 src/stacktrace_win-inl.h                           |  28 +++++
 src/symbolize.cc                                   |  27 +++++
 src/utilities.cc                                   |   2 +
 src/utilities.h                                    |   4 +
 vsprojects/include_chromium.props                  |  20 ++++
 vsprojects/libglog/libglog.vcxproj                 |  38 +++++++
 vsprojects/libglog/libglog.vcxproj.filters         | 114 +++++++++++++++++++++
 vsprojects/libglog_static/libglog_static.vcxproj   |  38 +++++++
 .../libglog_static/libglog_static.vcxproj.filters  | 114 +++++++++++++++++++++
 9 files changed, 385 insertions(+)
 create mode 100644 src/stacktrace_win-inl.h
 create mode 100644 vsprojects/include_chromium.props

diff --git a/src/stacktrace_win-inl.h b/src/stacktrace_win-inl.h
new file mode 100644
index 0000000..7762d7b
--- /dev/null
+++ b/src/stacktrace_win-inl.h
@@ -0,0 +1,28 @@
+#include "stacktrace.h"
+
+#include "base/debug/stack_trace.h"
+
+_START_GOOGLE_NAMESPACE_
+
+// If you change this function, also change GetStackFrames below.
+int GetStackTrace(void** result, int max_depth, int skip_count) {
+// NOTE(phl): This was tuned for the static library with VS2013.
+#ifdef _DEBUG
+  skip_count = 8;
+#else
+  skip_count = 4;
+#endif
+  ::base::debug::StackTrace stacktrace(skip_count);
+
+  size_t size;
+  const void* const* addresses = stacktrace.Addresses(&size);
+
+  if (size > max_depth)
+    size = max_depth;
+  for (int i = 0; i < size; i++)
+    result[i] = const_cast<void*>(addresses[i]);
+
+  return size;
+}
+
+_END_GOOGLE_NAMESPACE_
diff --git a/src/symbolize.cc b/src/symbolize.cc
index b69eefd..e5bacfd 100644
--- a/src/symbolize.cc
+++ b/src/symbolize.cc
@@ -649,6 +649,33 @@ static ATTRIBUTE_NOINLINE bool SymbolizeAndDemangle(void *pc, char *out,
 
 _END_GOOGLE_NAMESPACE_
 
+#elif defined(OS_WINDOWS)
+
+#include <string.h>
+#include "base/debug/stack_trace.h"
+
+_START_GOOGLE_NAMESPACE_
+
+static ATTRIBUTE_NOINLINE bool SymbolizeAndDemangle(void *pc, char *out,
+                                                    int out_size) {
+  const std::string prefix = "Backtrace:\n";
+  const std::string postfix = "\n";
+  void* stack[1];
+  stack[0] = pc;
+  ::base::debug::StackTrace stack_trace(stack, 1);
+  std::string symbol = stack_trace.ToString();
+  if (symbol.substr(0, prefix.size()) == prefix) {
+    symbol = symbol.substr(prefix.size());
+  }
+  if (symbol.substr(symbol.size() - postfix.size()) == postfix) {
+    symbol = symbol.substr(0, symbol.size() - postfix.size());
+  }
+  strcpy(out, symbol.c_str());
+  return true;
+}
+
+_END_GOOGLE_NAMESPACE_
+
 #else
 # error BUG: HAVE_SYMBOLIZE was wrongly set
 #endif
diff --git a/src/utilities.cc b/src/utilities.cc
index a6d1961..12f12c7 100644
--- a/src/utilities.cc
+++ b/src/utilities.cc
@@ -136,6 +136,7 @@ static void DumpStackTrace(int skip_count, DebugWriter *writerfn, void *arg) {
 static void DumpStackTraceAndExit() {
   DumpStackTrace(1, DebugWriteToStderr, NULL);
 
+#ifndef OS_WINDOWS
   // Set the default signal handler for SIGABRT, to avoid invoking our
   // own signal handler installed by InstallFailedSignalHandler().
   struct sigaction sig_action;
@@ -143,6 +144,7 @@ static void DumpStackTraceAndExit() {
   sigemptyset(&sig_action.sa_mask);
   sig_action.sa_handler = SIG_DFL;
   sigaction(SIGABRT, &sig_action, NULL);
+#endif
 
   abort();
 }
diff --git a/src/utilities.h b/src/utilities.h
index 5f79968..d3ef3e3 100644
--- a/src/utilities.h
+++ b/src/utilities.h
@@ -110,6 +110,8 @@
 #  define STACKTRACE_H "stacktrace_x86_64-inl.h"
 # elif (defined(__ppc__) || defined(__PPC__)) && __GNUC__ >= 2
 #  define STACKTRACE_H "stacktrace_powerpc-inl.h"
+# elif (defined(OS_WINDOWS))
+#  define STACKTRACE_H "stacktrace_win-inl.h"
 # endif
 #endif
 
@@ -127,6 +129,8 @@
 #elif defined(OS_MACOSX) && defined(HAVE_DLADDR)
 // Use dladdr to symbolize.
 # define HAVE_SYMBOLIZE
+#elif defined(OS_WINDOWS)
+# define HAVE_SYMBOLIZE
 #endif
 
 #ifndef ARRAYSIZE
diff --git a/vsprojects/include_chromium.props b/vsprojects/include_chromium.props
new file mode 100644
index 0000000..4dae729
--- /dev/null
+++ b/vsprojects/include_chromium.props
@@ -0,0 +1,20 @@
+﻿<?xml version="1.0" encoding="utf-8"?>
+<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
+  <ImportGroup Label="PropertySheets" />
+  <PropertyGroup Label="UserMacros" />
+  <PropertyGroup />
+  <ItemDefinitionGroup>
+    <ClCompile>
+      <AdditionalIncludeDirectories>$(SolutionDir)..\chromium;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
+      <PreprocessorDefinitions>NOGDI;NOMINMAX;UNICODE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
+      <ShowIncludes>true</ShowIncludes>
+    </ClCompile>
+    <Link>
+      <AdditionalDependencies>dbghelp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+    </Link>
+    <Lib>
+      <AdditionalDependencies>dbghelp.lib;%(AdditionalDependencies)</AdditionalDependencies>
+    </Lib>
+  </ItemDefinitionGroup>
+  <ItemGroup />
+</Project>
\ No newline at end of file
diff --git a/vsprojects/libglog/libglog.vcxproj b/vsprojects/libglog/libglog.vcxproj
index 4b48c6f..b59575b 100644
--- a/vsprojects/libglog/libglog.vcxproj
+++ b/vsprojects/libglog/libglog.vcxproj
@@ -32,9 +32,11 @@
   </ImportGroup>
   <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
     <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+    <Import Project="..\include_chromium.props" />
   </ImportGroup>
   <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
     <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+    <Import Project="..\include_chromium.props" />
   </ImportGroup>
   <PropertyGroup Label="UserMacros" />
   <PropertyGroup>
@@ -89,16 +91,52 @@
     </Link>
   </ItemDefinitionGroup>
   <ItemGroup>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace.cc" />
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\files\file_path.cc" />
+    <ClCompile Include="..\..\..\chromium\base\files\file_path_constants.cc" />
+    <ClCompile Include="..\..\..\chromium\base\memory\singleton.cc" />
+    <ClCompile Include="..\..\..\chromium\base\process\launch_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_piece.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util_constants.cc" />
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock.cc" />
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock_impl_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\threading\platform_thread_win.cc" />
     <ClCompile Include="..\..\src\logging.cc" />
     <ClCompile Include="..\..\src\raw_logging.cc" />
+    <ClCompile Include="..\..\src\symbolize.cc" />
     <ClCompile Include="..\..\src\utilities.cc" />
     <ClCompile Include="..\..\src\vlog_is_on.cc" />
     <ClCompile Include="..\..\src\windows\port.cc" />
   </ItemGroup>
   <ItemGroup>
+    <ClInclude Include="..\..\..\chromium\base\atomicops.h" />
+    <ClInclude Include="..\..\..\chromium\base\base_export.h" />
+    <ClInclude Include="..\..\..\chromium\base\basictypes.h" />
+    <ClInclude Include="..\..\..\chromium\base\compiler_specific.h" />
+    <ClInclude Include="..\..\..\chromium\base\debug\stack_trace.h" />
+    <ClInclude Include="..\..\..\chromium\base\files\file_path.h" />
+    <ClInclude Include="..\..\..\chromium\base\macros.h" />
+    <ClInclude Include="..\..\..\chromium\base\memory\aligned_memory.h" />
+    <ClInclude Include="..\..\..\chromium\base\memory\singleton.h" />
+    <ClInclude Include="..\..\..\chromium\base\port.h" />
+    <ClInclude Include="..\..\..\chromium\base\process\launch.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string16.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_piece.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util_win.h" />
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock.h" />
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock_impl.h" />
+    <ClInclude Include="..\..\..\chromium\base\third_party\dynamic_annotations\dynamic_annotations.h" />
+    <ClInclude Include="..\..\..\chromium\base\threading\platform_thread.h" />
+    <ClInclude Include="..\..\..\chromium\build\build_config.h" />
     <ClInclude Include="..\..\src\base\commandlineflags.h" />
     <ClInclude Include="..\..\src\base\googleinit.h" />
     <ClInclude Include="..\..\src\base\mutex.h" />
+    <ClInclude Include="..\..\src\stacktrace.h" />
+    <ClInclude Include="..\..\src\stacktrace_win-inl.h" />
+    <ClInclude Include="..\..\src\symbolize.h" />
     <ClInclude Include="..\..\src\utilities.h" />
     <ClInclude Include="..\..\src\windows\config.h" />
     <ClInclude Include="..\..\src\windows\glog\logging.h" />
diff --git a/vsprojects/libglog/libglog.vcxproj.filters b/vsprojects/libglog/libglog.vcxproj.filters
index 5efac96..0a9f6dd 100644
--- a/vsprojects/libglog/libglog.vcxproj.filters
+++ b/vsprojects/libglog/libglog.vcxproj.filters
@@ -9,6 +9,12 @@
       <UniqueIdentifier>{93995380-89BD-4b04-88EB-625FBE52EBFB}</UniqueIdentifier>
       <Extensions>h;hpp;hxx;hm;inl;inc;xsd</Extensions>
     </Filter>
+    <Filter Include="Chromium Header Files">
+      <UniqueIdentifier>{3dc7a827-ae4e-4437-91d6-48eac3bc97b8}</UniqueIdentifier>
+    </Filter>
+    <Filter Include="Chromium Source Files">
+      <UniqueIdentifier>{0c3112da-445a-4f66-aa77-e829d317b296}</UniqueIdentifier>
+    </Filter>
   </ItemGroup>
   <ItemGroup>
     <ClCompile Include="..\..\src\logging.cc">
@@ -26,6 +32,45 @@
     <ClCompile Include="..\..\src\vlog_is_on.cc">
       <Filter>Source Files</Filter>
     </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\process\launch_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\files\file_path.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\files\file_path_constants.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\memory\singleton.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock_impl_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util_constants.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\threading\platform_thread_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_piece.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\symbolize.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
   </ItemGroup>
   <ItemGroup>
     <ClInclude Include="..\..\src\base\commandlineflags.h">
@@ -61,5 +106,74 @@
     <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h">
       <Filter>Header Files</Filter>
     </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\debug\stack_trace.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\base_export.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\build\build_config.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\basictypes.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\memory\singleton.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\files\file_path.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\process\launch.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\macros.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\port.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock_impl.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_piece.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\atomicops.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\memory\aligned_memory.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\third_party\dynamic_annotations\dynamic_annotations.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\threading\platform_thread.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\compiler_specific.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string16.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util_win.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\stacktrace.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\stacktrace_win-inl.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\symbolize.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
   </ItemGroup>
 </Project>
\ No newline at end of file
diff --git a/vsprojects/libglog_static/libglog_static.vcxproj b/vsprojects/libglog_static/libglog_static.vcxproj
index bb2eb6e..d82ecd9 100644
--- a/vsprojects/libglog_static/libglog_static.vcxproj
+++ b/vsprojects/libglog_static/libglog_static.vcxproj
@@ -31,9 +31,11 @@
   </ImportGroup>
   <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="PropertySheets">
     <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+    <Import Project="..\include_chromium.props" />
   </ImportGroup>
   <ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
     <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
+    <Import Project="..\include_chromium.props" />
   </ImportGroup>
   <PropertyGroup Label="UserMacros" />
   <PropertyGroup>
@@ -72,16 +74,52 @@
     </ClCompile>
   </ItemDefinitionGroup>
   <ItemGroup>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace.cc" />
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\files\file_path.cc" />
+    <ClCompile Include="..\..\..\chromium\base\files\file_path_constants.cc" />
+    <ClCompile Include="..\..\..\chromium\base\memory\singleton.cc" />
+    <ClCompile Include="..\..\..\chromium\base\process\launch_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_piece.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util.cc" />
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util_constants.cc" />
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock.cc" />
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock_impl_win.cc" />
+    <ClCompile Include="..\..\..\chromium\base\threading\platform_thread_win.cc" />
     <ClCompile Include="..\..\src\logging.cc" />
     <ClCompile Include="..\..\src\raw_logging.cc" />
+    <ClCompile Include="..\..\src\symbolize.cc" />
     <ClCompile Include="..\..\src\utilities.cc" />
     <ClCompile Include="..\..\src\vlog_is_on.cc" />
     <ClCompile Include="..\..\src\windows\port.cc" />
   </ItemGroup>
   <ItemGroup>
+    <ClInclude Include="..\..\..\chromium\base\atomicops.h" />
+    <ClInclude Include="..\..\..\chromium\base\base_export.h" />
+    <ClInclude Include="..\..\..\chromium\base\basictypes.h" />
+    <ClInclude Include="..\..\..\chromium\base\compiler_specific.h" />
+    <ClInclude Include="..\..\..\chromium\base\debug\stack_trace.h" />
+    <ClInclude Include="..\..\..\chromium\base\files\file_path.h" />
+    <ClInclude Include="..\..\..\chromium\base\macros.h" />
+    <ClInclude Include="..\..\..\chromium\base\memory\aligned_memory.h" />
+    <ClInclude Include="..\..\..\chromium\base\memory\singleton.h" />
+    <ClInclude Include="..\..\..\chromium\base\port.h" />
+    <ClInclude Include="..\..\..\chromium\base\process\launch.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string16.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_piece.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util.h" />
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util_win.h" />
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock.h" />
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock_impl.h" />
+    <ClInclude Include="..\..\..\chromium\base\third_party\dynamic_annotations\dynamic_annotations.h" />
+    <ClInclude Include="..\..\..\chromium\base\threading\platform_thread.h" />
+    <ClInclude Include="..\..\..\chromium\build\build_config.h" />
     <ClInclude Include="..\..\src\base\commandlineflags.h" />
     <ClInclude Include="..\..\src\base\googleinit.h" />
     <ClInclude Include="..\..\src\base\mutex.h" />
+    <ClInclude Include="..\..\src\stacktrace.h" />
+    <ClInclude Include="..\..\src\stacktrace_win-inl.h" />
+    <ClInclude Include="..\..\src\symbolize.h" />
     <ClInclude Include="..\..\src\utilities.h" />
     <ClInclude Include="..\..\src\windows\config.h" />
     <ClInclude Include="..\..\src\windows\glog\logging.h" />
diff --git a/vsprojects/libglog_static/libglog_static.vcxproj.filters b/vsprojects/libglog_static/libglog_static.vcxproj.filters
index d73424b..eb7ae6d 100644
--- a/vsprojects/libglog_static/libglog_static.vcxproj.filters
+++ b/vsprojects/libglog_static/libglog_static.vcxproj.filters
@@ -7,6 +7,12 @@
     <Filter Include="Header Files">
       <UniqueIdentifier>{08189f04-ee79-41cb-8cf2-9c89e815b183}</UniqueIdentifier>
     </Filter>
+    <Filter Include="Chromium Header Files">
+      <UniqueIdentifier>{46760a46-1497-414b-a543-01cc9890b962}</UniqueIdentifier>
+    </Filter>
+    <Filter Include="Chromium Source Files">
+      <UniqueIdentifier>{51c15136-b567-4f4b-b5cf-a8dcb023afb5}</UniqueIdentifier>
+    </Filter>
   </ItemGroup>
   <ItemGroup>
     <ClCompile Include="..\..\src\logging.cc">
@@ -24,6 +30,45 @@
     <ClCompile Include="..\..\src\vlog_is_on.cc">
       <Filter>Source Files</Filter>
     </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\files\file_path.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\files\file_path_constants.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\process\launch_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock_impl_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\threading\platform_thread_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\memory\singleton.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\debug\stack_trace_win.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_piece.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\strings\string_util_constants.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\src\symbolize.cc">
+      <Filter>Source Files</Filter>
+    </ClCompile>
+    <ClCompile Include="..\..\..\chromium\base\synchronization\lock.cc">
+      <Filter>Chromium Source Files</Filter>
+    </ClCompile>
   </ItemGroup>
   <ItemGroup>
     <ClInclude Include="..\..\src\base\commandlineflags.h">
@@ -59,5 +104,74 @@
     <ClInclude Include="..\..\src\windows\glog\vlog_is_on.h">
       <Filter>Header Files</Filter>
     </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\memory\aligned_memory.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\atomicops.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\base_export.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\basictypes.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\build\build_config.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\compiler_specific.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\third_party\dynamic_annotations\dynamic_annotations.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\files\file_path.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\process\launch.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\synchronization\lock_impl.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\macros.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\threading\platform_thread.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\port.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\memory\singleton.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\debug\stack_trace.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_piece.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string_util_win.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\..\chromium\base\strings\string16.h">
+      <Filter>Chromium Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\stacktrace.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\stacktrace_win-inl.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
+    <ClInclude Include="..\..\src\symbolize.h">
+      <Filter>Header Files</Filter>
+    </ClInclude>
   </ItemGroup>
 </Project>
\ No newline at end of file
-- 
1.8.4.msysgit.0

From e40c19ca9ef8123af522833f29ed43162fa71b01 Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Mon, 10 Nov 2014 21:03:51 +0100
Subject: [PATCH] export IsGoogleLoggingInitialized()

---
 src/logging.cc             | 4 ++++
 src/windows/glog/logging.h | 2 ++
 2 files changed, 6 insertions(+)

diff --git a/src/logging.cc b/src/logging.cc
index 43611fd..8aab28a 100644
--- a/src/logging.cc
+++ b/src/logging.cc
@@ -2040,6 +2040,10 @@ void InitGoogleLogging(const char* argv0) {
   glog_internal_namespace_::InitGoogleLoggingUtilities(argv0);
 }
 
+bool IsGoogleLoggingInitialized() {
+  return glog_internal_namespace_::IsGoogleLoggingInitialized();
+}
+
 void ShutdownGoogleLogging() {
   glog_internal_namespace_::ShutdownGoogleLoggingUtilities();
   LogDestination::DeleteLogDestinations();
diff --git a/src/windows/glog/logging.h b/src/windows/glog/logging.h
index ea68db8..37dd54a 100644
--- a/src/windows/glog/logging.h
+++ b/src/windows/glog/logging.h
@@ -497,6 +497,8 @@ namespace google {
 // specified by argv0 in log outputs.
 GOOGLE_GLOG_DLL_DECL void InitGoogleLogging(const char* argv0);
 
+GOOGLE_GLOG_DLL_DECL bool IsGoogleLoggingInitialized();
+
 // Shutdown google's logging library.
 GOOGLE_GLOG_DLL_DECL void ShutdownGoogleLogging();
 
-- 
1.8.4.msysgit.0

From a41719627fabe520ddc7eae661d812ed3ce6758d Mon Sep 17 00:00:00 2001
From: pleroy <phl+personal@google.com>
Date: Sat, 6 Dec 2014 15:03:05 +0100
Subject: [PATCH] Stacktrace to the fatal file.

Cleanup.
---
 src/logging.cc             | 18 ++++++++++++++++--
 src/stacktrace_win-inl.h   |  4 ++--
 src/utilities.cc           |  2 +-
 src/windows/glog/logging.h |  3 +++
 4 files changed, 22 insertions(+), 5 deletions(-)

diff --git a/src/logging.cc b/src/logging.cc
index 8aab28a..fa1d899 100644
--- a/src/logging.cc
+++ b/src/logging.cc
@@ -177,6 +177,9 @@ GLOG_DEFINE_bool(stop_logging_if_full_disk, false,
 GLOG_DEFINE_string(log_backtrace_at, "",
                    "Emit a backtrace when logging at file:linenum.");
 
+GLOG_DEFINE_bool(log_backtrace_on_fatal, true,
+                 "Emit a backtrace to the fatal file.");
+
 // TODO(hamaji): consider windows
 #define PATH_SEPARATOR '/'
 
@@ -409,6 +412,7 @@ class LogFileObject : public base::Logger {
 class LogDestination {
  public:
   friend class LogMessage;
+  friend class LogMessageFatal;
   friend void ReprintFatalMessage();
   friend base::Logger* base::GetLogger(LogSeverity);
   friend void base::SetLogger(LogSeverity, base::Logger*);
@@ -1250,6 +1254,10 @@ ostream& LogMessage::stream() {
   return *(data_->stream_);
 }
 
+time_t LogMessage::timestamp() const {
+  return data_->timestamp_;
+}
+
 // Flush buffered message, called by the destructor, or any other function
 // that needs to synchronize the log.
 void LogMessage::Flush() {
@@ -1982,8 +1990,14 @@ LogMessageFatal::LogMessageFatal(const char* file, int line,
     LogMessage(file, line, result) {}
 
 LogMessageFatal::~LogMessageFatal() {
-    Flush();
-    LogMessage::Fail();
+  if (FLAGS_log_backtrace_on_fatal) {
+    std::string stacktrace;
+    DumpStackTraceToString(&stacktrace);
+    LogDestination::MaybeLogToLogfile(
+        GLOG_FATAL, timestamp(), stacktrace.c_str(), stacktrace.size());
+  }
+  Flush();
+  LogMessage::Fail();
 }
 
 namespace base {
diff --git a/src/stacktrace_win-inl.h b/src/stacktrace_win-inl.h
index 7762d7b..b068de1 100644
--- a/src/stacktrace_win-inl.h
+++ b/src/stacktrace_win-inl.h
@@ -8,9 +8,9 @@ _START_GOOGLE_NAMESPACE_
 int GetStackTrace(void** result, int max_depth, int skip_count) {
 // NOTE(phl): This was tuned for the static library with VS2013.
 #ifdef _DEBUG
-  skip_count = 8;
+  skip_count += 3;
 #else
-  skip_count = 4;
+  skip_count += 0;
 #endif
   ::base::debug::StackTrace stacktrace(skip_count);
 
diff --git a/src/utilities.cc b/src/utilities.cc
index 12f12c7..337a3f8 100644
--- a/src/utilities.cc
+++ b/src/utilities.cc
@@ -134,7 +134,7 @@ static void DumpStackTrace(int skip_count, DebugWriter *writerfn, void *arg) {
 }
 
 static void DumpStackTraceAndExit() {
-  DumpStackTrace(1, DebugWriteToStderr, NULL);
+  DumpStackTrace(4, DebugWriteToStderr, NULL);
 
 #ifndef OS_WINDOWS
   // Set the default signal handler for SIGABRT, to avoid invoking our
diff --git a/src/windows/glog/logging.h b/src/windows/glog/logging.h
index 37dd54a..7f81080 100644
--- a/src/windows/glog/logging.h
+++ b/src/windows/glog/logging.h
@@ -1247,6 +1247,9 @@ public:
 
   struct LogMessageData;
 
+protected:
+  time_t timestamp() const;
+
 private:
   // Fully internal SendMethod cases:
   void SendToSinkAndLog();  // Send to sink if provided and dispatch to the logs
-- 
1.8.4.msysgit.0

From 21dbaccdf2dda3435a951dbbe6ff93afec3e0564 Mon Sep 17 00:00:00 2001
From: pleroy <phl+personal@google.com>
Date: Sun, 18 Jan 2015 21:50:18 +0100
Subject: [PATCH] Properly defined macros.

---
 src/windows/glog/logging.h | 26 ++++++++++++++++++--------
 1 file changed, 18 insertions(+), 8 deletions(-)

diff --git a/src/windows/glog/logging.h b/src/windows/glog/logging.h
index 7f81080..650f609 100644
--- a/src/windows/glog/logging.h
+++ b/src/windows/glog/logging.h
@@ -130,16 +130,26 @@ typedef unsigned __int64 uint64;
 // Giving it this information can help it optimize for the common case in
 // the absence of better information (ie. -fprofile-arcs).
 //
-#ifndef GOOGLE_PREDICT_BRANCH_NOT_TAKEN
 #if 0
-#define GOOGLE_PREDICT_BRANCH_NOT_TAKEN(x) (__builtin_expect(x, 0))
-#define GOOGLE_PREDICT_FALSE(x) (__builtin_expect(x, 0))
-#define GOOGLE_PREDICT_TRUE(x) (__builtin_expect(!!(x), 1))
+#  ifndef GOOGLE_PREDICT_BRANCH_NOT_TAKEN
+#  define GOOGLE_PREDICT_BRANCH_NOT_TAKEN(x) (__builtin_expect(x, 0))
+#  endif
+#  ifndef GOOGLE_PREDICT_FALSE
+#  define GOOGLE_PREDICT_FALSE(x) (__builtin_expect(x, 0))
+#  endif
+#  ifndef GOOGLE_PREDICT_TRUE
+#  define GOOGLE_PREDICT_TRUE(x) (__builtin_expect(!!(x), 1))
+#  endif
 #else
-#define GOOGLE_PREDICT_BRANCH_NOT_TAKEN(x) x
-#define GOOGLE_PREDICT_FALSE(x) x
-#define GOOGLE_PREDICT_TRUE(x) x
-#endif
+#  ifndef GOOGLE_PREDICT_BRANCH_NOT_TAKEN
+#  define GOOGLE_PREDICT_BRANCH_NOT_TAKEN(x) x
+#  endif
+#  ifndef GOOGLE_PREDICT_FALSE
+#  define GOOGLE_PREDICT_FALSE(x) x
+#  endif
+#  ifndef GOOGLE_PREDICT_TRUE
+#  define GOOGLE_PREDICT_TRUE(x) x
+#  endif
 #endif
 
 // Make a bunch of macros for logging.  The way to log things is to stream
-- 
1.8.4.msysgit.0

From 028aef476e4b21813fc51dab0692efc1df720250 Mon Sep 17 00:00:00 2001
From: Robin Leroy <egg.robin.leroy@gmail.com>
Date: Sun, 22 Feb 2015 18:45:56 +0100
Subject: [PATCH] log stacktrace everywhere

---
 src/logging.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/logging.cc b/src/logging.cc
index fa1d899..b186275 100644
--- a/src/logging.cc
+++ b/src/logging.cc
@@ -1993,7 +1993,7 @@ LogMessageFatal::~LogMessageFatal() {
   if (FLAGS_log_backtrace_on_fatal) {
     std::string stacktrace;
     DumpStackTraceToString(&stacktrace);
-    LogDestination::MaybeLogToLogfile(
+    LogDestination::LogToAllLogfiles(
         GLOG_FATAL, timestamp(), stacktrace.c_str(), stacktrace.size());
   }
   Flush();
-- 
1.9.5.github.0

